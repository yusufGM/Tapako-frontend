import{c as g,a as j,r as t,j as a,t as l,b}from"./index-DwRnVWOH.js";const N=()=>{const{cart:s,clearCart:d}=g(),{token:c}=j(),[r,u]=t.useState(""),[n,h]=t.useState(""),[o,m]=t.useState(""),p=t.useMemo(()=>s.reduce((e,i)=>e+i.price*(i.qty||1),0),[s]),x=async()=>{if(!r||!n||!o){l.error("Alamat, email, dan nomor WhatsApp tidak boleh kosong");return}if(!c){l.error("Silakan login terlebih dahulu");return}try{const e=await b("/checkout",{items:s,address:r,email:n,phone:o},{headers:{Authorization:`Bearer ${c}`}});e?.invoice_url?window.location.href=e.invoice_url:(l.success("Checkout berhasil"),d())}catch(e){l.error(e?.payload?.error||"Checkout gagal")}};return a.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-4",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Checkout"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{className:"input input-bordered w-full",placeholder:"Alamat lengkap",value:r,onChange:e=>u(e.target.value)}),a.jsx("input",{className:"input input-bordered w-full",placeholder:"Email",type:"email",value:n,onChange:e=>h(e.target.value)}),a.jsx("input",{className:"input input-bordered w-full",placeholder:"No. WhatsApp",value:o,onChange:e=>m(e.target.value)}),a.jsx("button",{className:"btn w-full bg-black text-white",onClick:x,children:"Bayar sekarang"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[a.jsx("h2",{className:"font-medium mb-2",children:"Ringkasan"}),a.jsx("ul",{className:"space-y-2 max-h-64 overflow-auto",children:s.map(e=>a.jsxs("li",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"truncate",children:[e.name," Ã— ",e.qty||1]}),a.jsxs("span",{children:["Rp",(e.price*(e.qty||1)).toLocaleString("id-ID")]})]},e._id))}),a.jsxs("div",{className:"border-t mt-3 pt-3 flex justify-between font-semibold",children:[a.jsx("span",{children:"Total"}),a.jsxs("span",{children:["Rp",p.toLocaleString("id-ID")]})]})]})]})]})};export{N as default};

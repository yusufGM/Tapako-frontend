import{u as b,c as N,a as w,r as o,j as e,L as y,b as x,O as v,N as k}from"./index-C8HNumvK.js";async function L(r){const n=`${x.baseURL}/admin/orders`,s=`${x.baseURL.replace(/\/api$/,"")}/orders`,a={Authorization:`Bearer ${r}`};let t=await fetch(n,{headers:a});if(t.status===404&&(t=await fetch(s,{headers:a})),!t.ok){const i=await t.json().catch(()=>({}));throw new Error(i?.error||"Gagal memuat orders")}return t.json()}function A(){const r=b(),{username:n,token:s,clearUser:a}=N(),{clearCart:t}=w(),[i,m]=o.useState(0);o.useEffect(()=>{let d=!0;if(s)return L(s).then(l=>{if(!d||!Array.isArray(l))return;const u=l.reduce((p,g)=>p+(g.items||[]).reduce((f,j)=>f+(j.qty||0),0),0);m(u)}).catch(()=>{}),()=>{d=!1}},[s]);const h=()=>{a(),t(),r("/login",{replace:!0})};return e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white border-b z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block h-3 w-3 bg-black rounded-sm"}),e.jsx(y,{to:"/",className:"font-semibold hover:underline",children:"Tapako Admin"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Products sold"}),e.jsx("span",{className:"inline-flex items-center justify-center h-6 min-w-6 px-2 rounded-md bg-[#0b1424] text-white text-xs font-semibold",children:i})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["Hi, ",n]}),e.jsx("button",{type:"button",onClick:h,className:"px-3 py-1.5 rounded-md bg-red-600 text-white text-sm hover:bg-red-700",children:"Logout"})]})]})]})})}function c({to:r,children:n,end:s}){return e.jsx(k,{to:r,end:s,className:({isActive:a})=>`block w-full text-left px-4 py-2 rounded-lg transition ${a?"bg-white/10 text-white":"text-gray-300 hover:text-white hover:bg-white/10"}`,children:n})}function E(){return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(A,{}),e.jsx("div",{className:"pt-20 px-6 max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[260px_1fr] items-start gap-6",children:[e.jsxs("aside",{className:"bg-[#0b1424] text-white rounded-2xl p-4 lg:sticky lg:top-24 h-fit",children:[e.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-400 px-2 mb-2",children:"Menu"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{to:"/admin/dashboard",end:!0,children:"Dashboard"}),e.jsx(c,{to:"/admin/orders",end:!0,children:"Orders"}),e.jsx(c,{to:"/admin/products",end:!0,children:"Products"})]})]}),e.jsx("main",{className:"pb-10 min-h-[calc(100vh-8rem)]",children:e.jsx(v,{})})]})})]})}export{E as default};

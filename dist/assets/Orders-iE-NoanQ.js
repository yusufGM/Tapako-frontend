import{c as o,r as l,j as e}from"./index-CHx8mUDz.js";const h="https://tapako-backend.vercel.app",p=(r=0)=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(Math.max(0,Number(r)||0)).replace(/\s/g,"");function j(){const{token:r}=o(),[d,i]=l.useState([]),[m,c]=l.useState(!0),[n,x]=l.useState(null);return l.useEffect(()=>{let s=!0;return c(!0),x(null),fetch(`${h}/orders`,{headers:{Authorization:`Bearer ${r}`}}).then(async t=>{const a=await t.json().catch(()=>[]);if(!t.ok)throw new Error(a?.error||"Gagal memuat orders");s&&i(Array.isArray(a)?a:[])}).catch(t=>s&&x(t.message)).finally(()=>s&&c(!1)),()=>{s=!1}},[r]),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Orders"}),m?e.jsx("div",{className:"border rounded-xl p-6 animate-pulse",children:"Memuat…"}):n?e.jsx("div",{className:"border rounded-xl p-6 text-red-600",children:n}):d.length===0?e.jsx("div",{className:"border rounded-xl p-6 text-gray-600",children:"Belum ada order."}):e.jsx("div",{className:"border rounded-xl overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Waktu"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Alamat"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Items"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Status"})]})}),e.jsx("tbody",{children:d.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:new Date(s.createdAt).toLocaleString("id-ID")}),e.jsx("td",{className:"px-4 py-3",children:s.username||"-"}),e.jsx("td",{className:"px-4 py-3 max-w-[280px] truncate",title:s.address,children:s.address||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("ul",{className:"list-disc pl-5",children:(s.items||[]).map((t,a)=>e.jsxs("li",{children:[t.name," × ",t.qty]},a))})}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:p(s.total)}),e.jsx("td",{className:"px-4 py-3",children:s.status})]},s._id))})]})})]})}export{j as default};
